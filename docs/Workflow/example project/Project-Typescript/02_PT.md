# Planejamento T√©cnico ‚Äì Backend

## Tecnologias Backend

-   **Linguagem:** TypeScript
-   **Framework:** Node.js + Express
-   **Banco de Dados:** SQLite
-   **Documenta√ß√£o da API:** Swagger/OpenAPI

---

## Estrutura de Pastas ‚Äì Camadas com Repository

```
project/
‚îú‚îÄ‚îÄ routes/           # Endpoints da API
‚îÇ   ‚îî‚îÄ‚îÄ userRoutes.ts
‚îú‚îÄ‚îÄ controllers/      # Recebem requests e chamam os servi√ßos
‚îÇ   ‚îî‚îÄ‚îÄ userController.ts
‚îú‚îÄ‚îÄ services/         # L√≥gica de neg√≥cio e valida√ß√µes
‚îÇ   ‚îî‚îÄ‚îÄ userService.ts
‚îú‚îÄ‚îÄ repositories/     # Persist√™ncia em SQLite
‚îÇ   ‚îî‚îÄ‚îÄ userRepository.ts
‚îú‚îÄ‚îÄ models/           # Tipos e interfaces TypeScript
‚îÇ   ‚îî‚îÄ‚îÄ userModel.ts
‚îú‚îÄ‚îÄ utils/            # Helpers, valida√ß√µes e tratamento de erros
‚îú‚îÄ‚îÄ app.ts            # Ponto de entrada do servidor
‚îî‚îÄ‚îÄ package.json
```

**Fluxo entre camadas:**

```
Client ‚Üí Routes ‚Üí Controller ‚Üí Service ‚Üí Repository ‚Üí SQLite
```

---

## Diagrama Visual do Backend

```
+--------+       +------------+       +---------+       +------------+       +--------+
| Client | --->  |   Routes   | --->  |Controller| ---> |  Service   | --->  |Repository|
+--------+       +------------+       +---------+       +------------+       +--------+
                                                            |
                                                            v
                                                         +--------+
                                                         | SQLite |
                                                         +--------+
```

---

## Compara√ß√£o com Arquitetura ‚ÄúEm Camadas‚Äù (Presentation, Application, Domain, Infrastructure)

| Aspecto                       | Camadas com Repository                                   | Em Camadas (Presentation/Application/Domain/Infrastructure)                                                                            |
| ----------------------------- | -------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| **Responsabilidade**          | Separa√ß√£o entre rota, controller, service e persist√™ncia | Cada camada tem fun√ß√£o clara: Presentation (rotas), Application (servi√ßos), Domain (entidades e regras), Infrastructure (persist√™ncia) |
| **Complexidade**              | Moderada ‚Äì ideal para projetos pequenos/m√©dios           | Maior ‚Äì mais formal, recomendado para projetos grandes ou escal√°veis                                                                   |
| **Flexibilidade**             | Boa, mas l√≥gica de neg√≥cio est√° acoplada aos services    | Muito alta ‚Äì Domain √© independente de frameworks e banco                                                                               |
| **Uso de Reposit√≥rios**       | Sim, explicitamente separados da l√≥gica de neg√≥cio       | Pode ser implementado dentro da Infrastructure                                                                                         |
| **Facilidade de aprendizado** | Mais simples de entender e aplicar rapidamente           | Exige mais conhecimento de design patterns e abstra√ß√µes                                                                                |
| **Exemplo de uso**            | CRUD de usu√°rios escolar ou teste r√°pido                 | Sistema de pedidos, cadastro complexo ou aplica√ß√µes empresariais                                                                       |

üí° **Resumo:**

-   Para o projeto escolar, **Camadas com Repository** √© suficiente, separando l√≥gica de neg√≥cio e persist√™ncia de forma clara.
-   ‚ÄúEm Camadas‚Äù oferece maior escalabilidade e independ√™ncia entre regras de neg√≥cio e frameworks, mas seria mais complexo para este contexto.

---

## Roadmap / Sprints

-   **Sprint 1:** Configura√ß√£o do ambiente, instala√ß√£o de Node.js/TypeScript/Express, configura√ß√£o do SQLite, cria√ß√£o do `app.ts`, endpoints b√°sicos (CRUD de usu√°rios).
-   **Sprint 2:** Implementa√ß√£o de **valida√ß√µes e tratamento de erros**, testes unit√°rios b√°sicos.
-   **Sprint 3:** Integra√ß√£o com Swagger para documenta√ß√£o autom√°tica da API.
-   **Sprint 4:** Refatora√ß√£o, organiza√ß√£o final do projeto, ajustes e entrega do backend funcional.

---

‚úÖ **Planejamento T√©cnico conclu√≠do:**

-   Tecnologias definidas
-   Estrutura de pastas organizada e documentada
-   Diagrama visual do fluxo entre camadas
-   Compara√ß√£o arquitetural com ‚ÄúEm Camadas‚Äù
-   Roadmap em sprints detalhado

---

## Compara√ß√£o de Estruturas de Pastas para Backend

| Aspecto              | MVC                                           | Em Camadas                                                    |
| -------------------- | --------------------------------------------- | ------------------------------------------------------------- |
| Estrutura            | `/models`, `/views`, `/controllers`           | `/presentation`, `/application`, `/domain`, `/infrastructure` |
| Simplicidade         | Alta ‚Äì f√°cil de entender e iniciar            | M√©dia ‚Äì exige mais organiza√ß√£o, mas escal√°vel                 |
| Isolamento de l√≥gica | Limitado ‚Äì controllers podem ficar carregados | Alto ‚Äì separa regras de neg√≥cio do framework                  |
| Testabilidade        | M√©dia                                         | Alta ‚Äì facilita testes unit√°rios e integra√ß√£o                 |
| Recomenda√ß√µes        | Bom para projetos pequenos ou acad√™micos      | Ideal se quiser praticar boas pr√°ticas e POO estruturada      |

**Sugest√£o:** Para aprendizado de **POO e modulariza√ß√£o**, **Em Camadas** oferece mais oportunidades de boas pr√°ticas. **MVC** √© mais r√°pido para prot√≥tipos simples.

---

## Estrutura de Pastas ‚Äì Exemplos

**MVC (backend):**

```
/src
  /controllers
    userController.ts
  /models
    userModel.ts
  /routes
    userRoutes.ts
  /utils
    validation.ts
  app.ts
```

**Em Camadas (backend):**

```
/src
  /presentation
    /controllers
      userController.ts
    /routes
      userRoutes.ts
  /application
    /services
      userService.ts
  /domain
    /entities
      user.ts
    /repositories
      userRepository.ts
  /infrastructure
    /database
      sqliteClient.ts
    /persistence
      userRepositoryImpl.ts
  /utils
    validation.ts
  app.ts
```
